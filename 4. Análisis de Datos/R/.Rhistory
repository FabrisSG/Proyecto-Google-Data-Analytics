#Instalamos tidyverse para realizar el análisis de datos
install.packages("tidyverse")
#Cargamos los correspondientes paquetes que nos ayudarán a realizar el análisis
library(ggplot2)
library(tidyr)
library(dplyr)
library(readr)
metro_desglosado <- read.csv('Metro_desglosado_transpuesto_2.csv')
head(metro_desglosado)
str(metro_desglosado)
colnames(metro_desglosado)
#Instalamos tidyverse para realizar el análisis de datos
install.packages("tidyverse")
#Cargamos los correspondientes paquetes que nos ayudarán a realizar el análisis
library(ggplot2)
library(tidyr)
library(dplyr)
library(readr)
#Cargamos el archivo csv para trabajar. Utilizamos el conjunto de datos de tipo de acceso desglosado
metro_desglosado <- read.csv('Metro_desglosado_transpuesto.csv')
#Echamos un vistazo a los datos contenidos en el archivo csv
head(metro_desglosado)
str(metro_desglosado)
colnames(metro_desglosado)
#Cargamos el archivo csv para trabajar. Utilizamos el conjunto de datos de tipo de acceso desglosado
metro_desglosado <- read.csv('Metro_desglosado_transpuesto.csv')
#Echamos un vistazo a los datos contenidos en el archivo csv
head(metro_desglosado)
str(metro_desglosado)
colnames(metro_desglosado)
mutate(metro_desglosado, afluencia = boleto + prepago + gratuidad)
head(metro_desglosado)
metro_desglosado <- mutate(metro_desglosado, afluencia = boleto + prepago + gratuidad)
head(metro_desglosado)
tipo_acceso_desglosado <- colSums(metro_desglosado[,6:])
install.packages("tidyverse")
install.packages("tidyverse")
tipo_acceso_desglosado <- colSums(metro_desglosado[,6:9])
View(tipo_acceso_desglosado)
desglose_linea <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea, metro_desglosado = metro_desglosado,  sum)
desglose_linea <- aggregate(boleto, prepago, gratuidad, afluencia) ~ linea, metro_desglosado = metro_desglosado,  sum)
desglose_linea <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea, data = metro_desglosado, sum)
desglose_linea <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea, data = metro_desglosado, sum)
desglose_linea <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea), data = metro_desglosado, sum)
desglose_linea <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea, data = metro_desglosado, sum)
View(desglose_linea)
desglose_linea <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea + anio, data = metro_desglosado, sum)
View(desglose_linea)
desglose_linea_total <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea, data = metro_desglosado, sum)
View(desglose_linea_total)
#Si queremos que estos se agrupen por año, añadimos lo siguiente:
desglose_linea_anio <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea + anio, data = metro_desglosado, sum)
View(desglose_linea_anio)
library(readr)
ggplot(data = desglose_linea_anio) + geom_bar(x = linea, y=afluencia)
ggplot(desglose_linea_anio, aes(x=linea,y=linea,  fill=c(boleto, prepago, gratuidad, afluencia))) +
geom_bar(position = "dodge", stat="identity")
library(ggplot2)
library(ggplot2)
ggplot(desglose_linea_anio, aes(x=linea,y=linea,  fill=c(boleto, prepago, gratuidad, afluencia))) +
geom_bar(position = "dodge", stat="identity")
ggplot(desglose_linea_anio, aes(x=linea,y=linea,  fill=boleto) +
geom_bar(position = "dodge", stat="identity")
ggplot(desglose_linea_anio, aes(x=linea,y=linea,  fill=boleto) +
geom_bar(position = "dodge", stat="identity")
ggplot(desglose_linea_total, aes(x=linea,y=linea,  fill=boleto) +
geom_bar(position = "dodge", stat="identity")
ggplot(desglose_linea_anio, aes(x = linea, y = boleto, fill = factor(linea))) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Agrupación por línea",
x = "Línea",
y = "Conteo") +
scale_fill_manual(values = c("Línea 1" = "blue", "Línea 2" = "red"))
nuevo_desglose_linea_anio <- reshape2::melt(desglose_linea_anio, id.vars = "linea")
ggplot(nuevo_desglose_linea_anio, aes(x = linea, y = value, fill = variable)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Agrupación por línea",
x = "Línea",
y = "Conteo",
fill = "Tipo de Boleto") +
scale_fill_manual(values = c("boleto" = "blue", "prepago" = "green", "gratuidad" = "red", "afluencia" = "purple"))
nuevo_desglose_linea_anio <- reshape2::melt(desglose_linea_anio, id.vars = "linea")
ggplot(nuevo_desglose_linea_anio, aes(x = linea, y = value, fill = variable)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Agrupación por línea",
x = "Línea",
y = "Conteo",
fill = "Tipo de Boleto") +
scale_fill_manual(values = c("boleto" = "blue", "prepago" = "green", "gratuidad" = "red", "afluencia" = "purple"))
nuevo_desglose_linea_anio <- reshape2::melt(desglose_linea_anio, id.vars = "linea")
ggplot(nuevo_desglose_linea_anio, aes(x = linea, y = value, fill = variable)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Agrupación por línea",
x = "Línea",
y = "Conteo",
fill = "Tipo de Boleto") +
scale_fill_manual(values = c("boleto" = "blue", "prepago" = "green", "gratuidad" = "red", "afluencia" = "purple"))
install.packages(“reshape2”)
library(reshape2)
nuevo_desglose_linea_anio <- reshape2::melt(desglose_linea_anio, id.vars = "linea")
ggplot(nuevo_desglose_linea_anio, aes(x = linea, y = value, fill = variable)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Agrupación por línea",
x = "Línea",
y = "Conteo",
fill = "Tipo de Boleto") +
scale_fill_manual(values = c("boleto" = "blue", "prepago" = "green", "gratuidad" = "red", "afluencia" = "purple"))
install.packages(“reshape2”)
metro_desglosado <- read.csv('Metro_desglosado_transpuesto.csv')
#Echamos un vistazo a los datos contenidos en el archivo csv
head(metro_desglosado)
str(metro_desglosado)
colnames(metro_desglosado)
#Ya que queremos conocer la afluencia total de pasajeros por cada estación, sumaremos los ingresos por boleto, prepago y gratuidad
metro_desglosado <- mutate(metro_desglosado, afluencia = boleto + prepago + gratuidad)
head(metro_desglosado)
#TIPO DE ACCESO DESGLOSADO POR LINEA
desglose_linea_total <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea, data = metro_desglosado, sum)
View(desglose_linea_total)
#Si queremos que estos se agrupen por año, añadimos lo siguiente:
desglose_linea_anio <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea + anio, data = metro_desglosado, sum)
View(desglose_linea_anio)
#Ahora graficamos la afluencia de pasajeros por año
desglose_linea_anio_long <- tidyr::gather(desglose_linea_anio, key = "categoria", value = "valor", -linea)
# Crear el gráfico de barras agrupado
ggplot(desglose_linea_anio_long, aes(x = linea, y = valor, fill = categoria)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Gráfico de Barras Agrupado",
x = "Línea",
y = "Valor") +
scale_fill_manual(values = c("boleto" = "blue", "prepago" = "green", "gratuidad" = "orange", "afluencia" = "red")) +
theme_minimal()
desglose_linea_anio_long <- tidyr::gather(desglose_linea_anio, key = "categoria", value = "valor", -linea)
# Crear el gráfico de barras agrupado
ggplot(desglose_linea_anio_long, aes(x = linea, y = valor, fill = categoria)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Gráfico de Barras Agrupado",
x = "Línea",
y = "Valor") +
scale_fill_manual(values = c("boleto" = "blue", "prepago" = "orange", "gratuidad" = "green", "afluencia" = "pink")) +
theme_minimal()
desglose_linea_total_long <- tidyr::gather(desglose_linea_anio, key = "categoria", value = "valor", -linea)
# Crear el gráfico de barras agrupado
ggplot(desglose_linea_total_long, aes(x = linea, y = valor, fill = categoria)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Gráfico de Barras Agrupado",
x = "Línea",
y = "Valor") +
scale_fill_manual(values = c("boleto" = "blue", "prepago" = "orange", "gratuidad" = "green", "afluencia" = "pink")) +
theme_minimal()
desglose_linea_total_long <- tidyr::gather(desglose_linea_total, key = "categoria", value = "valor", -linea)
# Crear el gráfico de barras agrupado
ggplot(desglose_linea_total_long, aes(x = linea, y = valor, fill = categoria)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Gráfico de Barras Agrupado",
x = "Línea",
y = "Valor") +
scale_fill_manual(values = c("boleto" = "blue", "prepago" = "orange", "gratuidad" = "green", "afluencia" = "pink")) +
theme_minimal()
ggplot(desglose_linea_total_long, aes(x = linea, y = valor, fill = categoria)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Gráfico de Barras Agrupado",
x = "Línea",
y = "Valor") +
scale_fill_manual(values = c("boleto" = "#0D43EC", "prepago" = "#FD7409", "gratuidad" = "#037D33", "afluencia" = "#45BAFC")) +
theme_minimal()
desglose_linea_total_long <- tidyr::gather(desglose_linea_total, key = "categoria", value = "valor", -linea)
# Crear el gráfico de barras agrupado
ggplot(desglose_linea_total_long, aes(x = linea, y = valor, fill = categoria)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Tipo de acceso desglosado por línea (2021-2023)",
x = "Línea",
y = "Total de pasajeros") +
scale_fill_manual(values = c("boleto" = "#0D43EC", "prepago" = "#FD7409", "gratuidad" = "#037D33", "afluencia" = "#45BAFC")) +
theme_minimal()
#Instalamos tidyverse para realizar el análisis de datos
install.packages("tidyverse")
#Cargamos los correspondientes paquetes que nos ayudarán a realizar el análisis
library(ggplot2)
library(tidyr)
library(dplyr)
library(readr)
#Cargamos el archivo csv para trabajar. Utilizamos el conjunto de datos de tipo de acceso desglosado
metro_desglosado <- read.csv('Metro_desglosado_transpuesto.csv')
#Echamos un vistazo a los datos contenidos en el archivo csv
head(metro_desglosado)
str(metro_desglosado)
colnames(metro_desglosado)
#Ya que queremos conocer la afluencia total de pasajeros por cada estación, sumaremos los ingresos por boleto, prepago y gratuidad
metro_desglosado <- mutate(metro_desglosado, afluencia = boleto + prepago + gratuidad)
head(metro_desglosado)
#TIPO DE ACCESO DESGLOSADO POR LINEA
desglose_linea_total <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea, data = metro_desglosado, sum)
View(desglose_linea_total)
#Si queremos que estos se agrupen por año, añadimos lo siguiente:
desglose_linea_anio <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea + anio, data = metro_desglosado, sum)
View(desglose_linea_anio)
#Ahora graficamos la afluencia de pasajeros por año
desglose_linea_total_long <- tidyr::gather(desglose_linea_total, key = "categoria", value = "valor", -linea)
# Crear el gráfico de barras agrupado
ggplot(desglose_linea_total_long, aes(x = linea, y = valor, fill = categoria)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Tipo de acceso desglosado por línea (2021-2023)",
x = "Línea",
y = "Total de pasajeros") +
scale_fill_manual(values = c("boleto" = "#0D43EC", "prepago" = "#FD7409", "gratuidad" = "#037D33", "afluencia" = "#45BAFC")) +
theme_minimal()
#Cargamos los correspondientes paquetes que nos ayudarán a realizar el análisis
library(ggplot2)
library(tidyr)
library(dplyr)
library(readr)
#Cargamos el archivo csv para trabajar. Utilizamos el conjunto de datos de tipo de acceso desglosado
metro_desglosado <- read.csv('Metro_desglosado_transpuesto.csv')
#Echamos un vistazo a los datos contenidos en el archivo csv
head(metro_desglosado)
str(metro_desglosado)
colnames(metro_desglosado)
#Ya que queremos conocer la afluencia total de pasajeros por cada estación, sumaremos los ingresos por boleto, prepago y gratuidad
metro_desglosado <- mutate(metro_desglosado, afluencia = boleto + prepago + gratuidad)
head(metro_desglosado)
#TIPO DE ACCESO DESGLOSADO POR LINEA
desglose_linea_total <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea, data = metro_desglosado, sum)
View(desglose_linea_total)
#Si queremos que estos se agrupen por año, añadimos lo siguiente:
desglose_linea_anio <- aggregate(cbind(boleto, prepago, gratuidad, afluencia) ~ linea + anio, data = metro_desglosado, sum)
View(desglose_linea_anio)
#Ahora graficamos la afluencia de pasajeros por año
desglose_linea_total_long <- tidyr::gather(desglose_linea_total, key = "categoria", value = "valor", -linea)
# Crear el gráfico de barras agrupado
ggplot(desglose_linea_total_long, aes(x = linea, y = valor, fill = categoria)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Tipo de acceso desglosado por línea (2021-2023)",
x = "Línea",
y = "Total de pasajeros") +
scale_fill_manual(values = c("boleto" = "#0D43EC", "prepago" = "#FD7409", "gratuidad" = "#037D33", "afluencia" = "#45BAFC")) +
theme_minimal()
